@model ChaletViewModel
<input type="hidden" asp-for="Chalet.Order" class="form-control" />
<input type="hidden" asp-for="Chalet.CreatedDate" class="form-control" />
<input type="hidden" asp-for="Chalet.Id" class="form-control" />
<input type="hidden" asp-for="Chalet.Longitude" class="form-control" />
<input type="hidden" asp-for="Chalet.Latitude" class="form-control" />

<div class="form-row">
    <div class="form-group col-md-7">
        <label asp-for="Chalet.ChaletName" class="control-label">@Resource.ResortName</label>
        <input required="" asp-for="Chalet.ChaletName" class="form-control" />
        <span asp-validation-for="Chalet.ChaletName" class="text-danger"></span>
    </div>
    <div class="form-group col-md-5">
        <label asp-for="Chalet.ViewStatus" class="control-label"></label>
        <select asp-for="Chalet.ViewStatus" class="form-control">
            @if (Model.Chalet.ViewStatus)
            {
                <option value="true" selected="selected">@Resource.ViewStatusShown</option>
                <option value="false">@Resource.ViewStatusHidden</option>
            }
            else
            {
                <option value="true">@Resource.ViewStatusShown</option>
                <option value="false" selected="selected">@Resource.ViewStatusHidden</option>
            }
        </select>
    </div>
</div>



<div class="form-row">
    <div class="form-group col-md-3">
        <label asp-for="Chalet.CityId" class="control-label"></label>
        <select required="" asp-for="Chalet.CityId" class="form-control" asp-items="ViewBag.Cities">
            <option value="" selected="selected">@Resource.PleaseSelect</option>
        </select>
        <span asp-validation-for="Chalet.CityId" class="text-danger"></span>
    </div>
    <div class="form-group col-md-3">
        <label asp-for="Chalet.RegionId" class="control-label"></label>
        <input asp-for="Chalet.Region" required="" class="form-control" />
        <span asp-validation-for="Chalet.RegionId" class="text-danger"></span>
    </div>
    <div class="form-group col-md-3">
        <label asp-for="Chalet.NeighborhoodId" class="control-label"></label>
        <input asp-for="Chalet.Neighborhood" required="" class="form-control" />
        <span asp-validation-for="Chalet.NeighborhoodId" class="text-danger"></span>
    </div>
    <div class="form-group col-md-3">
        <label asp-for="Chalet.Direction" class="control-label"></label>
        <select required="" asp-for="Chalet.Direction" class="form-control">
            <option value="" selected>@Resource.PleaseSelect</option>
            <option value="@((int)Domain.Enums.Direction.East)">@(Resource.East)</option>
            <option value="@((int)Domain.Enums.Direction.West)">@(Resource.West)</option>
            <option value="@((int)Domain.Enums.Direction.South)">@(Resource.South)</option>
            <option value="@((int)Domain.Enums.Direction.North)">@(Resource.North)</option>
            <option value="@((int)Domain.Enums.Direction.Northeast)">@(Resource.Northeast)</option>
            <option value="@((int)Domain.Enums.Direction.NorthWest)">@(Resource.NorthWest)</option>
            <option value="@((int)Domain.Enums.Direction.Southeast)">@(Resource.Southeast)</option>
            <option value="@((int)Domain.Enums.Direction.Southwest)">@(Resource.Southwest)</option>
        </select>
        <span asp-validation-for="Chalet.Direction" class="text-danger"></span>
    </div>
</div>

<div class="form-group">
    <label asp-for="Chalet.ProprityCount" class="control-label"></label>
    <input asp-for="Chalet.ProprityCount" class="form-control" />
    <span asp-validation-for="Chalet.ProprityCount" class="text-danger"></span>
</div>
<div class="form-row">
    <div class="form-group">
        <label class="control-label">@Resource.CloseToSea</label>
        <label>
            <input type="radio" value="true" onchange="closeToSea(true)" asp-for="Chalet.CloseToSea" />
            @Resource.Yes
        </label>
        <label>
            <input type="radio" value="false" onchange="closeToSea(false)" asp-for="Chalet.CloseToSea" />
            @Resource.No
        </label>
        <span asp-validation-for="Chalet.CloseToSea" class="text-danger"></span>
    </div>
</div>
@if (Model.Chalet.CloseToSea)
{
    <div class="form-group" id="seaArea">
        <label asp-for="Chalet.DistanceFromSea" class="control-label"></label>
        <input asp-for="Chalet.DistanceFromSea" class="form-control" />
        <span asp-validation-for="Chalet.DistanceFromSea" class="text-danger"></span>
    </div>
}
else
{
    <div class="form-group d-none" id="seaArea">
        <label asp-for="Chalet.DistanceFromSea" class="control-label"></label>
        <input asp-for="Chalet.DistanceFromSea" class="form-control" />
        <span asp-validation-for="Chalet.DistanceFromSea" class="text-danger"></span>
    </div>
}
@if (Model.Chalet.Id != Guid.Empty)
{
    <h4 class="mb-2">@Resource.ContactInformation</h4>
    <i class="text-info">* @Resource.PleaseAddUserToManageTheSystem</i>
    <br />
    <button type="button" class="btn btn-outline-primary btn-sm my-2" onclick="addUser()"><i class="icon-plus"></i> @Resource.AddUser</button>
    <div class="row">
        @foreach (var modelChaletUser in Model.ChaletUsers.OrderByDescending(c => c.IsAdmin))
        {
            var adminBorder = "";
            if (modelChaletUser.IsAdmin)
            {
                adminBorder = "border-info";
            }
            <div class="col-md-6">
                <div class="card mb-4 p-2 @adminBorder">
                    <div class="entry-title">
                        <h4>
                            @Resource.UserName: @modelChaletUser.User.FirstName @modelChaletUser.User.LastName
                        </h4>
                        <h4><span class="text-muted">@Resource.Email: @modelChaletUser.User.Email</span></h4>
                    </div>
                    <div class="entry-title">
                        <h4>
                            @Resource.PhoneNumber: @modelChaletUser.User.PhoneNumber
                        </h4>
                        <h4><span class="text-muted">@Resource.WhatsAppNumber: @modelChaletUser.User.WhatsAppNumber</span></h4>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary" type="button" onclick="updateUser('@modelChaletUser.User.Id','@modelChaletUser.User.FirstName','@modelChaletUser.User.LastName','@modelChaletUser.User.Email','@modelChaletUser.User.PhoneNumber','@modelChaletUser.User.WhatsAppNumber','@modelChaletUser.User.JobId','@modelChaletUser.SendWhatsAppNotifications.ToString().ToLower()',@modelChaletUser.User.UserType)"><i class="icon-edit"></i></button>
                        <a href="~/UserAccount/RemoveChaletBank/@modelChaletUser.User.Id" class="btn btn-danger">
                            <i class="icon-trash"></i>
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
    <hr />
}


@foreach (var modelParameterGroup in Model.ParameterGroups.Where(c=>!c.IsChild).OrderBy(c => c.Order))
{
<div class="border p-3 my-2">
    <h5 class="text-muted">@modelParameterGroup.Name</h5>
    <div class="form-row">
        @foreach (var parameter in modelParameterGroup.Parameters.OrderBy(c => c.Index))
        {
            if (parameter.Type == (int)Enums.ParameterType.Checkbox)
            {
                var isChecked = "";
                if (Model.ResortParameterValues.Select(c => c.ParameterId).Contains(parameter.Id))
                {
                    isChecked = "checked='checked'";
                }
                <div class="form-group form-check mr-3">
                    <label class="form-check-label">
                        <input class="form-check-input" @isChecked type="checkbox" name="checkboxes[]" value="@parameter.Id" /> @Html.DisplayName(parameter.Name)
                    </label>
                </div>
            }
            else
            {
                var value = "";
                if (Model.ResortParameterValues.Select(c => c.ParameterId).Contains(parameter.Id))
                {
                    value = $"{Model.ResortParameterValues.FirstOrDefault(c => c.ParameterId == parameter.Id)?.Value}";
                }
                <div class="form-group col-md-3">
                    <label for="@parameter.Name" class="control-label">@parameter.Name</label>
                    <input value="@value" type="text" name="inputValues[]" class="form-control" />
                    <input type="hidden" name="inputIds[]" value="@parameter.Id" />
                    <span validation-for="Name" class="text-danger"></span>
                </div>
            }

        }
    </div>
    @foreach (var modelParameterGroupItem in Model.ParameterGroups.Where(c => c.ParentId==modelParameterGroup.Id).OrderBy(c => c.Order))
    {
        <div class="border p-3 my-2">
            <h5 class="text-muted">@modelParameterGroupItem.Name</h5>
            <div class="form-row">
                @foreach (var parameter in modelParameterGroupItem.Parameters.OrderBy(c => c.Index))
                {
                    if (parameter.Type == (int)Enums.ParameterType.Checkbox)
                    {
                        var isChecked = "";
                        if (Model.ResortParameterValues.Select(c => c.ParameterId).Contains(parameter.Id))
                        {
                            isChecked = "checked='checked'";
                        }
                        <div class="form-group form-check mr-3">
                            <label class="form-check-label">
                                <input class="form-check-input" @isChecked type="checkbox" name="checkboxes[]" value="@parameter.Id" /> @Html.DisplayName(parameter.Name)
                            </label>
                        </div>
                    }
                    else
                    {
                        var value = "";
                        if (Model.ResortParameterValues.Select(c => c.ParameterId).Contains(parameter.Id))
                        {
                            value = $"{Model.ResortParameterValues.FirstOrDefault(c => c.ParameterId == parameter.Id)?.Value}";
                        }
                        <div class="form-group col-md-3">
                            <label for="@parameter.Name" class="control-label">@parameter.Name</label>
                            <input value="@value" type="text" name="inputValues[]" class="form-control" />
                            <input type="hidden" name="inputIds[]" value="@parameter.Id" />
                            <span validation-for="Name" class="text-danger"></span>
                        </div>
                    }

                }
            </div>
        </div>

    }
</div>

}

<div class="form-group">
    <label asp-for="Chalet.Description" class="control-label"></label>
    <textarea rows="7" asp-for="Chalet.Description" class="form-control" placeholder="@Resource.Description..."></textarea>
    <span asp-validation-for="Chalet.Description" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Chalet.Location" class="control-label"></label>
    <input asp-for="Chalet.Location" class="form-control" />
    <span asp-validation-for="Chalet.Location" class="text-danger"></span>
</div>
<div id="gmap" style="height:300px"></div>

<div class="form-group bottommargin mt-3">
    <h4 class="mb-2">@Resource.PropertyImages</h4>
    <div class="widget_links mb-2">
        <ul>
            <b>@Resource.ConditionOfAddImages:</b>
            <li>@Resource.ImageCountDontLessThan4</li>
            <li>@Resource.MostAddOutdoorPatio</li>
            <li>@Resource.MostAddExternalCouncil</li>
            <li>@Resource.MostAddSwimmingPoolImage</li>
            <li>@Resource.MostAddSleepRooms</li>
        </ul>
    </div>


    <div class="row" data-big="3" data-lightbox="gallery">
        @foreach (var img in Model.Chalet.ChaletImages)
        {
            <div class="col-md-2 entry">
                <div class="entry-image">
                    <a href="@Url.Content("~")/@img.File.FileContent" data-lightbox="image"><img src="@Url.Content("~")/@img.File.FileContentMin" alt="Standard Post with Image"></a>
                    <div>
                        <a href="~/UserAccount/RemoveChaletImage/@img.FileId?chaletId=@img.ChaletId" class="btn btn-outline-danger btn-sm mt-1"><i class="icon-trash"></i></a>
                        @if (!img.IsPrimary)
                        {
                            <a href="~/UserAccount/RemoveChaletImage/@img.FileId?chaletId=@img.ChaletId" class="btn btn-outline-primary btn-sm mt-1"><i class="icon-image"></i></a>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
    <input id="input-3" name="formFiles[]" type="file" class="file" multiple data-show-upload="false" data-show-caption="true" data-show-preview="true">
</div>

