@model Unit
@{
    var unit = Model;
    var hasOffer = false;
    var offerAmount = 0.0;
    if (Model.Offers!=null)
    {
        if (Model.Offers.Count>0)
        {
            hasOffer = Model.Offers.Any();
            offerAmount = Model.Offers.FirstOrDefault().Amount;
        }
    }
}
<div class="shadow">
    <div class="grid-inner row">
        <div class="col-lg-3">
            @if (unit.UnitImages.Count > 1)
            {
                <div class="fslider" data-pagi="false" data-lightbox="gallery">
                    <div class="flexslider" style="direction:ltr">
                        <div class="slider-wrap">
                            @foreach (var image in unit.UnitImages)
                            {
                                <div class="slide"><a href="@Url.Content("~/" + image.File.FileContentMin)" data-lightbox="gallery-item"><img src="@Url.Content("~/" + image.File.FileContentMin)" alt="Standard Post with Gallery"></a></div>
                            }
                        </div>
                    </div>
                </div>


            }
            else if (unit.UnitImages.Count == 1)
            {
                var uitImage = unit.UnitImages.OrderByDescending(c => c.IsPrimary).FirstOrDefault();
                <a href="@Url.Content("~/" + uitImage.File.FileContentMin)" data-lightbox="image"><img src="@Url.Content("~/" + uitImage.File.FileContentMin)" alt="Bronze Time Hotel"></a>
            }
            else
            {
                <a href="@Url.Content("~/images/noimg.jpg")" data-lightbox="image"><img src="@Url.Content("~/images/noimg.jpg")" alt="Bronze Time Hotel"></a>
            }
        </div>
        <div class="col-lg col-md-8 mt-4 mt-lg-0 pt-2">
            <div class="entry-title title-sm">
                <h3>
                    <a href="@Url.Action("Index","Unit",new {id=unit.Id,DateFrom=DateTime.Now,DateTo=DateTime.Now })">
                        @unit.Name
                        @if (unit.IsSimilar)
                        {
                            <span>(@unit.Number)</span>
                        }
                        @if (unit.Chalet.PropertyType==(int)Enums.PropertyType.Resort)
                        {
                            <span> - @unit.Chalet.ChaletName</span>
                        }
                    </a>
                </h3>
            </div>
            <div class="entry-meta">
                <ul>
                    @if (!string.IsNullOrEmpty(unit.Code))
                    {
                        <li>
                            @Resource.UnitCode (@unit.Code)
                        </li>
                    }

                    <li>
                        <i class="icon-line-map"></i>
                        <span>@unit.Chalet.City.CityName, @unit.Chalet.Neighborhood</span>
                    </li>
                    <li><i class="icon-eye"></i><a>@unit.Views</a></li>
                </ul>
            </div>
            <div class="entry-content mt-1">
                <p class="mb-0">
                    @if (!string.IsNullOrEmpty(unit.Description))
                    {
                        if (unit.Description.Length > 60)
                        {
                            <span>@unit.Description.Substring(0, 60)...</span>
                        }
                        else
                        {
                            <span>@unit.Description.</span>
                        }
                    }
                </p>
            </div>
        </div>
        <div class="col-lg-auto col-md-4 mt-4 mt-lg-0 text-left text-md-center py-2">
            <div class="hotel-price">
                @if (hasOffer)
                {
                    <small><del>@unit.DayPrice @Resource.Currency</del></small>
                    <br />
                    <span>@offerAmount @Resource.Currency</span>
                }
                else
                {
                    @unit.DayPrice @Resource.Currency
                }
            </div>
            <small><em>@Resource.PricePerNight</em></small>
            <br>
            <a href="@Url.Action("Index","Unit",new {id=unit.Id,DateFrom=DateTime.Now,DateTo=DateTime.Now })" class="button button-rounded mt-4 mx-0">@Resource.Details</a>
            @if (unit.IsReserved)
            {
                <br>
                <small class="text-danger"><em>@Resource.ReservedInThisDate</em></small>
            }
        </div>
    </div>
</div>

